---
title: "Newspapers"
output: github_document
---




```{r setup, include=FALSE, echo = FALSE}
# Basic knitr options
library(knitr)
opts_chunk$set(comment = NA, 
               echo = FALSE, 
               warning = FALSE, 
               message = FALSE, 
               error = TRUE, 
               cache = FALSE,
               fig.path = 'figures/')
```


```{r}
# Libraries
library(vilaweb)
library(rtweet)
library(tidyverse)
library(databrew)
library(qdapRegex)
library(httr)
# devtools::install_github('jayjacobs/tldextract')
library(tldextract)
```

```{r, eval = TRUE}
# Set up
source('get_tweets.R')

# # 
# people <- sort(unique(df$username))
# people_df <- data_frame(username = people,
#                         category = '')
# write_csv(people_df,
#           'people.csv')
# newspapers <- sort(unique(df$newspaper))
# newspapers_df <- data_frame(username = newspapers,
#                         category = '')
# write_csv(newspapers_df,
#           'newspapers.csv')
```


# The question

Politicians often tweet about newspapers, either by directly linking to a story or by re-tweeting a newspaper's tweet of a story. Knowing which newspapers politicians link to gives insight both into (a) what they read and (b) their worldview. For example, Donald Trump is well-known for tweeting stories from Fox News, a right-wing news outlet. 

Among Catalan and Spanish politicians, what is the distribution of newspaper articles?

# The methods

We gathered `r nrow(tl)` tweets from `r length(unique(tl$username))` well-known Catalan and Spanish politicians. We algorithmically identified references to `r length(sort(unique(df$newspaper)))` newspapers, and calculated the percentage of references to each for each politician. 

```{r}
pd <- df %>%
  group_by(person = username,
           newspaper) %>%
  tally %>%
  group_by(person) %>%
  mutate(p = n / sum(n) * 100) %>%
  ungroup %>%
  filter(!is.na(newspaper))

ggplot(data = pd,
       aes(x = person,
           y = newspaper)) +
  geom_point(aes(size = p),
             alpha = 0.8) +
  ggthemes::theme_fivethirtyeight() +
  theme(axis.text.x = element_text(angle = 90)) +
  scale_size_continuous(name = '%',
                        breaks = c(1, 5, 10, 25))
```

# Results

## Highlights

- ABC is a favorite of the right, but especially Pablo Casado: Pablo Casado % tweeted about ABC articles in 9% of his tweets, followed by España Ciudadana and Societat Civil Catalana.
- The cross-over between newspapers of preference for the Partido Popular, Ciudadanos and SCC was high: for example, El Confidencial, El Español, El Mundo, E-noticies, OKDiario saw high reference rates from politicians in these groups. 
- The cross-over between newspapers of preference for pro-independence politicians was also high: Ara, CCMA, Vilaweb, and local newspapers saw high reference rates from politicians in these groups.
- El País had the highest overall reference rates (7.48% of all tweets containing any link or tag). 
- Where unionist and independentist groups overlapped, it was generally politicians of ERC, Comuns and Socialists: for example, with high rates of El Diario and Público.



## By politician

The below shows the top 10 newspaper re-tweets for each politician.


```{r}
politics <- sort(unique(df$username))
politics <- politics[!is.na(politics)]
for(i in 1:length(politics)){
  this_politic <- politics[i]
  print(create_plot(usernames = this_politic, n = 10))
}
```

## By newspaper

The below shows the top 10 re-tweeters for each newspaper (relative to each person's overall tweet-load).

```{r}
newspapers <- sort(unique(df$newspaper))
newspapers <- newspapers[!is.na(newspapers)]
for(i in 1:length(newspapers)){
  this_politic <- newspapers[i]
  print(create_plot_newspaper(newspapers = this_politic, n = 10))
}
```

# Charts in Catalan


## By politician

The below shows the top 10 newspaper re-tweets for each politician.


```{r}
politics <- sort(unique(df$username))
politics <- politics[!is.na(politics)]
for(i in 1:length(politics)){
  this_politic <- politics[i]
  print(create_plot(username = this_politic, n = 10, language = 'ca'))
}
```

## By newspaper

The below shows the top 10 re-tweeters for each newspaper (relative to each person's overall tweet-load).

```{r}
newspapers <- sort(unique(df$newspaper))
newspapers <- newspapers[!is.na(newspapers)]
for(i in 1:length(newspapers)){
  this_politic <- newspapers[i]
  print(create_plot_newspaper(newspapers = this_politic, n = 10, language = 'ca'))
}
```




# Details

## Code

All code for this analysis is openly available at [https://github.com/joebrew/vilaweb/tree/master/inst/rmd/newspapers](https://github.com/joebrew/vilaweb/tree/master/inst/rmd/newspapers).

